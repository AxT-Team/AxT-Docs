---
title: åˆ›å»ºç¬¬ä¸€ä¸ªæ’ä»¶ - AxTBot-v2
---
# åˆ›å»ºç¬¬ä¸€ä¸ªæ’ä»¶ - AxTBot-v2

## æ¦‚å¿µæ˜ç¡®
æˆ‘ä»¬éœ€è¦æ˜ç¡®ä¸€ä¸ªæ¦‚å¿µï¼šæ¡†æ¶ä¼šè¯»å–åœ¨.envä¸­è®¾å®šçš„`PLUGINS_DIR`å€¼ å¹¶å°†å…¶åº”ç”¨åˆ°æ’ä»¶è¯»å–å‡½æ•°ä¸­

å› æ­¤ï¼Œè¦åˆ›å»ºä¸€ä¸ªæ’ä»¶ï¼Œæˆ‘ä»¬é¦–å…ˆéœ€è¦åœ¨pluginsç›®å½•ï¼ˆæ‚¨è®¾å®šçš„plugins_dirå€¼ï¼‰ä¸‹åˆ›å»ºä¸€ä¸ªæ’ä»¶

å¤§è‡´æ ¼å¼å¦‚ä¸‹ï¼š

```
ğŸ“‚ plugins
â””â”€â”€ ğŸ“œ test.py
```

æ­¤å¤„ï¼Œæ‚¨å¯ä»¥ä½¿ç”¨ä»»æ„åç§°ï¼Œåªè¦ç›®å½•ä¸‹æ²¡æœ‰å…¶ä»–é‡åæ–‡ä»¶å³å¯

## å¼•å…¥æ¨¡å—

æˆ‘ä»¬åœ¨`test.py`å¤´éƒ¨å†™å…¥ä»¥ä¸‹å†…å®¹

``` python
from Core.Event import group_handle_event
```

`group_handle_event`æ˜¯æ¡†æ¶æä¾›çš„ä¸€ä¸ªäº‹ä»¶å¤„ç†å‡½æ•°ï¼Œç”¨äºå¤„ç†ç¾¤èŠæ¶ˆæ¯ã€‚

æœ‰å…³äº‹ä»¶å¤„ç†å‡½æ•°ï¼Œæˆ‘ä»¬ä¼šåœ¨ [å‡½æ•°è£…é¥°å™¨](handle) ä¸€èŠ‚ç»†è®²

## å†™å…¥æ ¸å¿ƒåŠŸèƒ½

æ—¢ç„¶æˆ‘ä»¬è¦å®ç°æ¥æ”¶ -> å‘é€çš„é€»è¾‘ï¼Œæˆ‘ä»¬å°±åº”è¯¥åˆç†ä½¿ç”¨`å‡½æ•°è£…é¥°å™¨`å®ç°

ä»¥ä¸‹æ˜¯ä¸€æ®µç¤ºä¾‹ï¼Œå½“æ¥æ”¶åˆ°å‘½ä»¤ä¸º/helpæ—¶çš„è¿”å›å†…å®¹

```python{1,3,4,19}
from Core.Event import group_handle_event, send_group_message

@group_handle_event('/help', 'help')
async def help_handler(event):
    content = "\n=======AxTç¤¾åŒºæœºå™¨äºº=======" + "\n" + \
                   "| help | - è·å–å¸®åŠ©èœå•" + "\n" + \
                   "| ping | - æ˜¾ç¤ºPingèœå•" + "\n" + \
                   "| ipinfo | - æ˜¾ç¤ºIPInfoèœå•" + "\n" + \
                   "| whois | - æ˜¾ç¤ºWhoisèœå•" + "\n" + \
                   "| hotlist | - æ˜¾ç¤ºæ¯æ—¥çƒ­æ¦œèœå•" + "\n" + \
                   "| mc | - æŸ¥è¯¢Minecraftç›¸å…³å†…å®¹" + "\n" + \
                   "| jrrp | - è·å–ä»Šæ—¥äººå“" + "\n" + \
                   "| remake | - é‡æ¥ä¸€ä¸– ä½ ä¼šå˜æˆä»€ä¹ˆ" + "\n" + \
                   "| ask | - è¯»èµ›åšä¹‹ä¹¦ å“ç™¾å‘³äººç”Ÿ" + "\n" + \
                   "===============" + "\n" + \
                   "å®˜æ–¹ç¤¾åŒºç¾¤: 832275338" + "\n" + \
                   "===============" + "\n" + \
                   "AxTBot Public v 2.0"
    await send_group_message(event.group_openid, msg_type=0, content=content, msg_id=event.msg_id)
```

æ³¨æ„çœ‹åŠ é˜´å½±çš„è¡Œï¼Œå…¶ä¸­ç¬¬ 1 è¡Œæˆ‘ä»¬å¼•å…¥äº†`group_handle_event`å’Œ`send_group_message`ä¸¤ä¸ªå‡½æ•°

å…¶ä¸­ï¼Œ`group_handle_event`æˆ‘ä»¬å·²ç»ç®€å•ä»‹ç»äº†ä»–çš„åŠŸèƒ½ï¼Œè€Œä»–çš„ä½¿ç”¨æ–¹å¼å¦‚ä¸‹

```python
...
@group_handle_event('/help', 'help')
async def handle_event(event):
    # è¿™é‡Œæ‰§è¡Œå…¶ä»–æ“ä½œ...
    pass
```

å…¶ä¸­ï¼Œæ‹¬å·å†…çš„å³ä¸ºæ’ä»¶çš„æ³¨å†Œå‘½ä»¤

ä½ å¯ä»¥çœ‹åˆ°ï¼Œæˆ‘åœ¨è¿™é‡ŒåŒæ—¶åšäº†/å’Œä¸å¸¦/çš„å‘½ä»¤ï¼Œè¿™æ˜¯å› ä¸ºæ¡†æ¶å¼€å‘å‘¨æœŸè¾ƒçŸ­ï¼Œæ²¡æœ‰å¯¹è‡ªå®šä¹‰å‰ç¼€è¿›è¡Œåˆç†åˆ¤æ–­è€Œå¯¼è‡´æ³¨å†Œå‘½ä»¤è¾ƒä¹±

è€Œåç´§éšä¸€ä¸ª`å¼‚æ­¥å‡½æ•°`ï¼Œæˆ‘ä»¬åœ¨è¿™é‡Œç»™ä»–å‘½åä¸º`handle_event`

::: tip
è¿™é‡Œå¹¶éåªå…è®¸`handle_event`åç§°çš„å‡½æ•°ï¼Œå®é™…ä¸Šæˆ‘ä»¬ä¸å¯¹æ­¤åšé™åˆ¶ï¼Œæ‚¨å¯ä»¥ä½¿ç”¨ä»»ä½•éå†…ç½®å‡½æ•°åç§°
:::

æˆ‘ä»¬å°±å¯ä»¥åœ¨å‡½æ•°å†…åšåˆ¤æ–­äº†

## å®Œå–„æ’ä»¶

æŒ‰ç…§ä¸Šè¿°å†…å®¹ï¼Œæˆ‘ä»¬å·²ç»èƒ½å¤Ÿæ¥æ”¶ç”±`/help`å’Œ`help`å¼€å¤´çš„ä¿¡æ¯å¹¶ä¼ å…¥å¯¹åº”çš„å‡½æ•°è£…é¥°å™¨äº†

é‚£ä¹ˆï¼Œæˆ‘ä»¬åº”è¯¥æ€ä¹ˆåšæ‰èƒ½å‘å›æ¶ˆæ¯å‘¢ï¼Ÿ

æˆ‘ä»¬éœ€è¦å¼•å…¥çš„å°±æ˜¯`send_group_message`å‡½æ•°

ç”¨æ³•å¦‚ä¸‹ï¼š
```python
...
# å‰éƒ¨çœç•¥
@group_handle_event('/help', 'help')
async def handle_event(event):
    # è¿™é‡Œæ‰§è¡Œå…¶ä»–æ“ä½œ...
    await send_group_message(event.group_openid, msg_type=0, content='å¸®åŠ©èœå•', msg_id=event.msg_id)
```

æˆ‘ä»¬éœ€è¦åˆ†æä»¥ä¸‹`send_group_message`å‡½æ•°ï¼Œå…¶æ¥å—å‚æ•°è¾ƒå¤šï¼Œä½†ä¸ºè®²è§£æ–¹ä¾¿ï¼Œæˆ‘ä»¬åªå¯¹ä»£ç ä¸­å‡ºç°çš„å‚æ•°è¿›è¡Œè§£é‡Š

- `group_openid`: ç¾¤èŠID **å¿…å¡«**

- `msg_type`: å‘é€æ¶ˆæ¯çš„ç±»å‹ï¼Œè¯¦è§[å‘é€æ¶ˆæ¯-ç¾¤èŠ QQæœºå™¨äººæ–‡æ¡£](https://bot.q.qq.com/wiki/develop/api-v2/server-inter/message/send-receive/send.html#ç¾¤èŠ)

- `content`: æ¶ˆæ¯å†…å®¹

- `msg_id`: ç”¨äºå›å¤ç”¨æˆ·æ¶ˆæ¯ï¼Œä¸å¡«å³ä¸º**ä¸»åŠ¨æ¶ˆæ¯**ã€‚æœ‰å…³ä¸»åŠ¨æ¶ˆæ¯é™é¢‘ï¼Œè¯¦è§[å‘é€æ¶ˆæ¯ QQæœºå™¨äººæ–‡æ¡£](https://bot.q.qq.com/wiki/develop/api-v2/server-inter/message/send-receive/send.html)

åŒæ—¶ï¼Œæˆ‘ä»¬è¿˜å‘ç°ï¼Œåœ¨å¼‚æ­¥å‡½æ•°çš„å¼€å¤´ï¼Œæˆ‘ä»¬å¼•å…¥äº†ä¸€ä¸ªé‡`event`ï¼Œå…¶å¸¦æœ‰å½“å‰äº‹ä»¶å†…å®¹ï¼ˆå¼€å‘å‘¨æœŸé—®é¢˜ï¼Œå¯Œæ–‡æœ¬ç±»æ¶ˆæ¯çš„é™„ä»¶ä»å¾…éªŒè¯å¯ç”¨æ€§ï¼‰
eventçš„å¯ç”¨å†…å®¹å¦‚ä¸‹ï¼š
- group_openid: ç¾¤èŠID
- user_id: ç”¨æˆ·ID ï¼ˆå¯èƒ½åœ¨æœªæ¥æ›´æ–°ä¸ºuser_openidï¼‰
- content: ç”¨æˆ·å‘é€çš„ä¿¡æ¯ï¼ˆå¼€å‘å‘¨æœŸé—®é¢˜ï¼Œcontentä¼šé™„å¸¦å‘½ä»¤å¤´ï¼‰
- timestamp: æ—¶é—´æˆ³ï¼Œå¼€æ”¾å¹³å°æ¥æ”¶åˆ°ç”¨æˆ·ä¿¡æ¯çš„æ—¶é—´
- msg_id: æ¶ˆæ¯ID
- attachments: é™„ä»¶æ–‡ä»¶ï¼Œé»˜è®¤åˆ—è¡¨
- channel_id: å­é¢‘é“ID
- guild_id: é¢‘é“ID
- seq: å‘é€æ¶ˆæ¯çš„åºåˆ—å·
- event_type: äº‹ä»¶ç±»å‹ï¼Œè¯¦è§ [äº‹ä»¶ - QQæœºå™¨äººæ–‡æ¡£](https://bot.q.qq.com/wiki/develop/api-v2/server-inter/message/send-receive/event.html) ä¸­çš„å„ä¸ªäº‹ä»¶ç±»å‹

ç„¶åé‡å¯æœºå™¨äººï¼Œæˆ‘ä»¬å°±å¯ä»¥ä½¿ç”¨`@æœºå™¨äºº help`æˆ–è€…`@æœºå™¨äºº /help`æ¿€æ´»å‘½ä»¤äº†ï¼Œæ­¤æ—¶æœºå™¨äººä¼šè¿”å›`@ç”¨æˆ· å¸®åŠ©èœå•`

é‚£ä¹ˆï¼Œæ­å–œä½ ï¼Œä½ å·²ç»å®Œæˆäº†æœ€åŸºç¡€çš„æ’ä»¶ç¼–å†™

## ä¸‹ä¸€æ­¥...

äº†è§£å‡½æ•°è£…é¥°å™¨ï¼š[å‡½æ•°è£…é¥°å™¨](./handle.md)

äº†è§£å†…ç½®å‡½æ•°ï¼š[å†…ç½®å‡½æ•°](./function.md)

ä½¿ç”¨æ—¥å¿—è®°å½•å™¨ï¼š[æ—¥å¿—è®°å½•å™¨](./logger.md)